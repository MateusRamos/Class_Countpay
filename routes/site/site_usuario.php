<?php
use \Countpay\Page;
use \Countpay\DB\Sql;
use \Countpay\Model\User;
use \Countpay\Model\Carteira;
use \Countpay\Model\Lancamento;

/*===========================================================|===========================================================\\
||											    																		 ||
||										    	        Rotas login                                                      ||
||												    																	 ||
//===========================================================|===========================================================*/

//----------------------------------------------------  GET - LOGIN  ----------------------------------------------------//
$app->get('/login', function() {

    $page = new Page([
        "header"=>false,
        "footer"=>false
    ]);

    $page->setTpl("login");

});


//====================================================  POST - LOGIN  ===================================================//
$app->post('/login', function() {

    $login = $_POST['login'];
    $senha = $_POST['senha'];

    User::loginNormal($login, $senha);
    
});

//----------------------------------------------------  GET LOGOUT  -----------------------------------------------------// 
$app->get('/sair', function() {

    session_destroy();

    header('Location: /login');
    exit;

});


/*===========================================================|===========================================================\\
||											    																		 ||
||										    	        Rotas index                                                      ||
||												    																	 ||
//===========================================================|===========================================================*/

//-----------------------------------------------------  GET - DASHBOARD  -----------------------------------------------//
$app->get('/', function() {

    $page = new Page();

    User::verifyLogin();

    $page->setTpl("index");

});


?>